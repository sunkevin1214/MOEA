#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#define M_PI       3.14159265358979323846

double* dtlz7(int M, const double * X) {
	int k = 20;
	int xDim = k + M - 1;
	double *objs = (double*)malloc(M*sizeof(double));

	double xm = 0.0;
	for (int i = M-1; i < xDim; i++) {
		xm += X[i];
	}
	double g = 0.0;
	g = 1 + (9.0 / k)*xm;
	for (int i = 0; i < M - 1; i++) {
		objs[i] = X[i];
	}
	double h = 0.0;
	for (int i = 0; i < M - 1; i++) {
		h += (objs[i] / (1 + g))*(1 + sin(3 * M_PI*objs[i]));
	}
	h = M - h;
	objs[M - 1] = (1 + g)*h;
	return objs;
}

//int main() {
//	double data[20][39] = { { 0.254790, 0.175874, 0.647618, 0.582249, 0.404580, 0.347713, 0.821721, 0.514423, 0.850713, 0.738640, 0.552291, 0.123932, 0.737842, 0.559033, 0.178117, 0.894942, 0.631070, 0.692532, 0.683716, 0.789364, 0.112284, 0.673295, 0.098594, 0.987935, 0.597490, 0.759327, 0.809204, 0.751946, 0.631189, 0.223770, 0.275070, 0.137869, 0.411594, 0.782872, 0.107889, 0.501283, 0.835221, 0.281502, 0.503781, },
//	{ 0.224040, 0.721758, 0.679017, 0.540739, 0.448373, 0.149997, 0.429921, 0.884281, 0.560560, 0.585987, 0.629883, 0.490357, 0.063405, 0.854100, 0.359635, 0.071453, 0.089892, 0.556670, 0.132083, 0.367653, 0.784428, 0.429564, 0.142027, 0.170432, 0.335311, 0.740648, 0.748619, 0.228669, 0.355074, 0.373564, 0.248629, 0.217802, 0.602638, 0.693788, 0.182228, 0.431721, 0.322460, 0.230383, 0.489594, },
//	{ 0.667833, 0.473486, 0.635787, 0.869941, 0.365816, 0.586092, 0.887771, 0.588026, 0.929609, 0.246735, 0.031991, 0.852998, 0.860441, 0.347879, 0.056705, 0.242487, 0.080862, 0.396521, 0.722725, 0.206028, 0.291570, 0.451739, 0.168251, 0.257792, 0.299225, 0.743688, 0.120187, 0.064187, 0.997003, 0.087500, 0.451639, 0.182141, 0.750520, 0.009802, 0.099095, 0.997560, 0.552262, 0.711129, 0.877049, },
//	{ 0.844392, 0.152721, 0.945174, 0.264779, 0.763505, 0.262145, 0.391183, 0.154752, 0.696667, 0.666416, 0.614713, 0.873927, 0.934405, 0.446027, 0.521886, 0.053754, 0.777241, 0.061591, 0.110353, 0.086667, 0.603533, 0.609857, 0.196249, 0.396799, 0.452593, 0.105920, 0.525045, 0.767330, 0.224171, 0.640117, 0.227713, 0.041820, 0.583533, 0.843213, 0.489764, 0.811603, 0.979129, 0.624573, 0.353142, },
//	{ 0.344462, 0.341125, 0.208935, 0.318074, 0.627896, 0.044454, 0.769114, 0.199863, 0.582791, 0.083483, 0.362411, 0.270294, 0.984398, 0.054239, 0.335849, 0.441722, 0.905135, 0.780176, 0.117493, 0.771934, 0.964423, 0.059403, 0.317480, 0.073995, 0.422646, 0.681560, 0.325834, 0.671202, 0.652451, 0.180617, 0.804450, 0.106942, 0.551793, 0.922332, 0.193245, 0.485652, 0.549309, 0.590609, 0.449444, },
//	{ 0.780520, 0.607389, 0.709282, 0.119215, 0.771980, 0.754933, 0.396792, 0.406955, 0.815397, 0.625960, 0.049533, 0.208461, 0.858939, 0.177108, 0.175669, 0.013283, 0.533772, 0.337584, 0.640718, 0.205675, 0.432485, 0.315811, 0.316429, 0.684096, 0.359606, 0.463261, 0.546449, 0.715213, 0.604991, 0.045051, 0.986104, 0.616443, 0.583571, 0.770954, 0.895892, 0.894448, 0.330424, 0.660438, 0.963530, },
//	{ 0.675332, 0.191745, 0.236231, 0.939829, 0.932854, 0.242785, 0.808514, 0.748706, 0.879014, 0.660945, 0.489570, 0.564980, 0.785559, 0.662808, 0.208947, 0.897191, 0.109154, 0.607866, 0.328814, 0.388272, 0.694752, 0.772722, 0.217563, 0.402388, 0.558319, 0.212163, 0.398881, 0.642061, 0.387245, 0.723173, 0.029992, 0.939661, 0.511820, 0.042660, 0.099090, 0.137547, 0.619472, 0.047555, 0.042298, },
//	{ 0.006715, 0.738427, 0.119396, 0.645552, 0.972741, 0.442402, 0.755077, 0.825584, 0.988912, 0.729752, 0.192510, 0.640312, 0.513377, 0.330829, 0.905154, 0.196658, 0.825809, 0.741254, 0.653812, 0.551779, 0.758099, 0.696433, 0.251042, 0.982835, 0.742545, 0.098519, 0.415093, 0.419048, 0.142187, 0.347438, 0.535664, 0.354456, 0.082593, 0.378186, 0.044166, 0.390005, 0.360637, 0.348785, 0.972958, },
//	{ 0.602170, 0.242850, 0.607304, 0.479463, 0.192028, 0.687796, 0.377396, 0.789963, 0.000522, 0.890752, 0.123084, 0.417029, 0.177602, 0.898486, 0.675391, 0.093371, 0.338098, 0.104813, 0.749131, 0.228953, 0.432642, 0.125332, 0.892922, 0.402184, 0.424335, 0.823574, 0.180738, 0.390762, 0.025135, 0.660617, 0.087077, 0.410629, 0.719570, 0.704340, 0.557295, 0.927356, 0.756510, 0.451341, 0.189207, },
//	{ 0.386771, 0.917424, 0.450138, 0.639317, 0.138874, 0.359228, 0.216019, 0.318524, 0.865439, 0.982303, 0.205494, 0.205976, 0.398589, 0.118155, 0.468468, 0.307367, 0.293973, 0.127888, 0.583186, 0.641941, 0.655498, 0.130151, 0.703223, 0.620672, 0.429356, 0.175010, 0.255387, 0.816140, 0.421112, 0.383869, 0.802091, 0.984349, 0.996156, 0.729513, 0.772495, 0.917494, 0.413901, 0.240905, 0.667120, },
//	{ 0.915991, 0.269062, 0.458725, 0.544716, 0.696266, 0.736340, 0.790407, 0.534064, 0.612566, 0.769029, 0.146515, 0.947933, 0.133931, 0.988418, 0.912132, 0.456058, 0.746313, 0.549540, 0.740032, 0.484480, 0.109755, 0.092352, 0.555738, 0.154370, 0.124873, 0.163570, 0.020536, 0.317428, 0.184100, 0.627347, 0.989145, 0.945579, 0.354534, 0.224277, 0.311940, 0.713574, 0.492345, 0.715045, 0.586440, },
//	{ 0.001151, 0.765500, 0.661945, 0.647311, 0.093820, 0.394707, 0.949304, 0.089951, 0.989950, 0.581446, 0.189072, 0.082071, 0.030890, 0.539982, 0.104012, 0.101669, 0.010337, 0.485229, 0.234827, 0.151846, 0.933760, 0.007820, 0.184434, 0.381345, 0.024434, 0.665987, 0.923676, 0.814540, 0.725775, 0.021650, 0.066946, 0.676645, 0.971259, 0.269055, 0.178982, 0.618337, 0.694743, 0.856182, 0.675112, },
//	{ 0.462449, 0.188662, 0.770286, 0.543886, 0.525404, 0.683416, 0.327565, 0.111706, 0.527680, 0.928313, 0.042652, 0.105709, 0.939142, 0.706917, 0.745546, 0.995390, 0.048447, 0.890476, 0.734958, 0.781932, 0.187461, 0.423109, 0.212031, 0.161134, 0.290185, 0.894389, 0.653700, 0.789074, 0.370363, 0.910570, 0.939398, 0.988302, 0.346449, 0.673031, 0.338956, 0.343288, 0.972734, 0.281508, 0.361022, },
//	{ 0.424349, 0.287498, 0.350218, 0.721047, 0.530344, 0.704047, 0.671264, 0.136293, 0.479523, 0.580090, 0.635198, 0.142041, 0.301306, 0.999492, 0.736267, 0.332093, 0.667916, 0.798960, 0.970599, 0.100606, 0.266179, 0.655573, 0.077347, 0.758112, 0.317521, 0.516558, 0.932614, 0.852264, 0.841560, 0.800559, 0.018178, 0.766831, 0.886544, 0.477492, 0.210146, 0.936027, 0.327755, 0.731051, 0.620278, },
//	{ 0.460916, 0.091113, 0.662010, 0.522495, 0.861140, 0.442305, 0.438645, 0.678652, 0.801348, 0.016983, 0.281867, 0.166460, 0.295534, 0.287849, 0.561861, 0.297347, 0.603468, 0.734341, 0.866930, 0.294066, 0.797830, 0.722923, 0.913800, 0.871111, 0.653690, 0.702702, 0.163512, 0.505637, 0.734230, 0.745847, 0.683839, 0.336699, 0.454695, 0.623716, 0.510153, 0.124774, 0.837803, 0.137763, 0.811151, },
//	{ 0.770160, 0.576209, 0.416159, 0.993705, 0.484853, 0.019578, 0.833501, 0.495177, 0.227843, 0.120860, 0.538597, 0.620959, 0.332936, 0.414523, 0.184194, 0.062045, 0.526102, 0.051332, 0.086235, 0.237373, 0.487604, 0.531209, 0.706715, 0.350777, 0.956936, 0.153590, 0.921097, 0.635661, 0.571026, 0.813113, 0.783736, 0.662382, 0.413427, 0.236445, 0.906364, 0.730585, 0.739072, 0.836723, 0.019257, },
//	{ 0.322472, 0.683363, 0.841929, 0.218677, 0.393456, 0.330858, 0.768854, 0.189710, 0.498094, 0.862711, 0.695163, 0.573710, 0.467068, 0.464840, 0.597211, 0.298244, 0.729709, 0.072885, 0.366437, 0.530872, 0.768958, 0.108818, 0.557789, 0.685536, 0.935731, 0.953457, 0.794658, 0.950894, 0.176855, 0.383306, 0.534138, 0.244165, 0.217732, 0.177124, 0.628924, 0.646477, 0.954174, 0.138602, 0.083874, },
//	{ 0.784739, 0.546593, 0.832917, 0.105798, 0.671431, 0.424309, 0.167254, 0.495006, 0.900852, 0.484297, 0.499116, 0.052078, 0.648198, 0.763957, 0.299937, 0.046351, 0.707253, 0.088527, 0.369199, 0.091499, 0.396007, 0.631766, 0.313429, 0.294149, 0.457886, 0.540884, 0.577394, 0.443964, 0.957384, 0.617279, 0.885359, 0.295507, 0.125655, 0.829643, 0.101534, 0.833152, 0.031923, 0.588209, 0.974802, },
//	{ 0.471357, 0.425729, 0.256441, 0.109697, 0.741258, 0.270270, 0.861980, 0.147608, 0.574661, 0.844856, 0.535801, 0.931201, 0.025228, 0.818204, 0.134123, 0.505428, 0.781377, 0.798351, 0.685028, 0.405315, 0.272939, 0.126500, 0.166204, 0.530629, 0.240478, 0.679734, 0.440036, 0.060019, 0.265322, 0.575495, 0.899005, 0.680178, 0.308915, 0.766922, 0.390855, 0.398282, 0.356869, 0.366157, 0.651350, },
//	{ 0.035763, 0.644443, 0.613461, 0.063591, 0.520052, 0.197054, 0.989872, 0.054974, 0.845178, 0.209405, 0.445183, 0.728662, 0.842207, 0.100222, 0.212602, 0.761426, 0.287977, 0.943008, 0.597942, 0.104846, 0.037235, 0.134303, 0.622497, 0.832423, 0.763898, 0.036563, 0.257614, 0.866750, 0.924581, 0.530052, 0.625938, 0.527847, 0.726104, 0.934478, 0.054617, 0.749822, 0.662654, 0.806760, 0.231238, } };
//	
//	int M = 20;
//	int xDim = 39;
//	for (int j = 0; j < 1; j++) {
//		double *rs = dtlz7(M, data[j]);
//		for (int i = 0; i < M; i++) {
//			printf("%f\t", rs[i]);
//		}
//		printf("\n");
//		free(rs);
//	}
//	
//	system("pause");
//	return 0;
//}
